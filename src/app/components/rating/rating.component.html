<div id="rating-container" *ngIf="loadedRating">
  <div class="text-center">
    <h5 class="sub-header">
      Исходные данные для расчета рейтинга управ районов САО в части
      показателей ЖКХ за
    </h5>
    <div class="rating-year-month-pick">
      <div class="btn-group rating-year-month-pick" dropdown>
        <button id="yearDropDown" class="btn btn-default" type="button"
                dropdownToggle>
          {{displayableMonth(pickedMonth)}}
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu year-dropdown-menu" dropdownMenu>
          <li class="year-dropdown-menu" *ngFor="let month of availableMonths"
              (click)="monthPicked(month)"><a href="#">{{displayableMonth(month)}}</a>
          </li>
        </ul>
      </div>
      <div class="btn-group rating-year-month-pick" dropdown>
        <button id="monthDropDown" class="btn btn-default" type="button"
                dropdownToggle>
          {{pickedYear}}
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu year-dropdown-menu" dropdownMenu>
          <li class="year-dropdown-menu" *ngFor="let year of availableYears"
              (click)="yearPicked(year)"><a href="#">{{year}}</a></li>
        </ul>
      </div>
      года
    </div>
    <h5>
      в соответствии с {{loadedRating.base_document.description_imp}}
    </h5>
  </div>
  <div class="rating-label">
    <div *ngIf="loadedRating.is_negotiated && loadedRating.is_approved"
         class="rating-year-month-pick">
      <span class="label label-success">Рейтинг утвержден</span>
    </div>
    <div *ngIf="loadedRating.is_negotiated && !loadedRating.is_approved"
         class="rating-year-month-pick">
      <span class="label label-info">Рейтинг согласован</span>
    </div>
    <div *ngIf="!loadedRating.is_negotiated && !loadedRating.is_approved"
         class="rating-year-month-pick">
      <span class="label label-warning">Рейтинг на cогласовании</span>
    </div>
  </div>
  <div class="table-responsive rating-table">
    <table class="table table-striped">
      <thead>
      <tr>
        <th class="text-center rating-element-name">Наименование<br>показателя
        </th>
        <th class="text-center rating-responsible-name">Ответственный</th>
        <th class="text-center" *ngFor="let region of regions">
          {{region.name.slice(0, 3)}}
        </th>
        <th class="text-center">Средний</th>
        <th class="text-center rating-element-description">Описание<br>показателя</th>
        <th class="text-center rating-negotiator-comment">Комментарии<br>согласовывающего</th>
        <th class="text-center rating-region-comment">Замечания<br>районов</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let element of loadedRating.elements">
        <td>{{element.rating_element.number}}) {{element.rating_element.name}}</td>
        <td class="rating-responsible-name">{{element.responsible.displayName()}}</td>
        <td *ngFor="let region of regions">
          {{element.values[region.id]}}
        </td>
        <td class="text-center">{{element.getAverage()}}</td>
        <td>{{element.rating_element.base_description}} {{element.additional_description}}</td>
        <td>{{element.negotiator_comment}}</td>
        <td>{{element.region_comment}}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
